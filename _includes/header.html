<header class="navbar">
    <nav class="nav-container">
        <!-- Brand Logic -->
        {% if page.context == 'dotman' or page.url contains '/docs' %}
        <a href="{{ '/' | relative_url }}" class="logo-btn">
            <span
                class="logo-text"
                style="font-family: var(--font-mono); font-weight: 700"
                >~ dotman</span
            >
            <!-- Breadcrumb for project context -->
            <span
                class="hidden-mobile"
                style="
                    font-size: 0.875rem;
                    color: var(--text-muted-darker);
                    font-family: var(--font-mono);
                    margin-left: 0.5rem;
                    font-weight: 400;
                "
            >
                / projects / dotman
            </span>
        </a>
        {% else %}
        <!-- Hub Brand -->
        <a href="{{ '/' | relative_url }}" class="logo-btn">
            <span
                class="logo-text"
                style="font-family: var(--font-mono); font-weight: 700"
                >~ gabrielcapilla</span
            >
            {% if page.layout == 'post' %}
            <span
                class="hidden-mobile"
                style="
                    font-size: 0.875rem;
                    color: var(--text-muted-darker);
                    font-family: var(--font-mono);
                    margin-left: 0.5rem;
                    font-weight: 400;
                "
            >
                / writing
            </span>
            {% endif %}
        </a>
        {% endif %}

        <!-- Desktop Nav -->
        <div class="hidden-mobile" style="gap: 1rem; align-items: center">
            {% if page.context == 'dotman' or page.url contains '/docs' %}
            <!-- Project Context Links -->
            <a
                href="{{ '/' | relative_url }}"
                class="nav-link"
                style="color: var(--text-muted)"
                >Back to Hub</a
            >
            <div
                style="
                    width: 1px;
                    height: 1rem;
                    background: rgba(255, 255, 255, 0.2);
                "
            ></div>

            <a
                href="{{ '/projects/dotman' | relative_url }}"
                class="nav-link {% if page.url == '/projects/dotman/' %}active{% endif %}"
                >Overview</a
            >
            <a
                href="{{ '/docs' | relative_url }}"
                class="nav-link {% if page.url contains 'docs' %}active{% endif %}"
                >Docs</a
            >

            <a
                href="https://github.com/gabrielcapilla/dotman"
                target="_blank"
                class="nav-link"
                style="
                    background: white;
                    color: var(--primary-blue);
                    margin-left: 0.5rem;
                "
            >
                <svg
                    class="icon"
                    viewBox="0 0 24 24"
                    style="width: 16px; height: 16px"
                >
                    <path
                        d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"
                    ></path>
                </svg>
                GitHub
            </a>
            {% else %}
            <!-- Hub Context Links -->
            <a href="{{ '/projects/' | relative_url }}" class="nav-link"
                >Projects</a
            >
            <a href="{{ '/writing/' | relative_url }}" class="nav-link"
                >Writing</a
            >
            <a
                href="https://github.com/gabrielcapilla"
                target="_blank"
                class="nav-link"
                style="
                    background: rgba(255, 255, 255, 0.1);
                    margin-left: 0.5rem;
                "
            >
                GitHub
            </a>
            {% endif %}
        </div>
    </nav>
</header>

<!-- Mobile Bottom Nav -->
<div class="mobile-nav-wrapper hidden-desktop">
    <nav class="mobile-nav">
        {% if page.context == 'dotman' or page.url contains '/docs' %}
        <!-- DOTMAN CONTEXT MOBILE NAV -->

        <!-- Overview (Terminal Icon) -->
        <a
            href="{{ '/projects/dotman/' | relative_url }}"
            class="{% if page.url == '/projects/dotman/' %}active{% endif %}"
            aria-label="Overview"
        >
            <svg class="icon" viewBox="0 0 24 24">
                <polyline points="4 17 10 11 4 5"></polyline>
                <line x1="12" y1="19" x2="20" y2="19"></line>
            </svg>
        </a>

        <!-- Docs (Book Icon) -->
        <a
            href="{{ '/docs' | relative_url }}"
            class="{% if page.url contains '/docs' %}active{% endif %}"
            aria-label="Documentation"
        >
            <svg class="icon" viewBox="0 0 24 24">
                <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                <path
                    d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"
                ></path>
            </svg>
        </a>

        <!-- GitHub (External) -->
        <a
            href="https://github.com/gabrielcapilla/dotman"
            target="_blank"
            aria-label="GitHub"
        >
            <svg class="icon" viewBox="0 0 24 24">
                <path
                    d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"
                ></path>
            </svg>
        </a>

        {% else %}
        <!-- HUB CONTEXT MOBILE NAV -->

        <!-- Home (Hub) -->
        <a
            href="{{ '/' | relative_url }}"
            class="{% if page.url == '/' %}active{% endif %}"
            aria-label="Home"
        >
            <svg class="icon" viewBox="0 0 24 24">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                <polyline points="9 22 9 12 15 12 15 22"></polyline>
            </svg>
        </a>

        <!-- Projects Archive (Layers Icon) -->
        <a
            href="{{ '/projects/' | relative_url }}"
            class="{% if page.url contains '/projects/' and page.context != 'dotman' %}active{% endif %}"
            aria-label="Projects"
        >
            <svg class="icon" viewBox="0 0 24 24">
                <polygon points="12 2 2 7 12 12 22 7 12 2"></polygon>
                <polyline points="2 17 12 22 22 17"></polyline>
                <polyline points="2 12 12 17 22 12"></polyline>
            </svg>
        </a>

        <!-- Writing Archive (Pen Icon) -->
        <a
            href="{{ '/writing/' | relative_url }}"
            class="{% if page.url contains '/writing/' %}active{% endif %}"
            aria-label="Writing"
        >
            <svg class="icon" viewBox="0 0 24 24">
                <path d="M12 19l7-7 3 3-7 7-3-3z"></path>
                <path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path>
                <path d="M2 2l7.586 7.586"></path>
                <circle cx="11" cy="11" r="2"></circle>
            </svg>
        </a>
        {% endif %}
    </nav>
</div>
